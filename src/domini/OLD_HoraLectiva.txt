package domini;

import java.util.ArrayList;

public class HoraLectiva
{
    private ArrayList<Assignacio> assignacions;
    
    public HoraLectiva(){
        this.assignacions = new ArrayList<>();
    }
    
    public HoraLectiva(ArrayList<Assignacio> a){
        this.assignacions = new ArrayList<>(a);
    }

    public HoraLectiva(HoraLectiva hL){
        this.assignacions = new ArrayList<>(hL.getAssignacions());
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        HoraLectiva hL = new HoraLectiva();
        try {
            for(int i = 0; i < this.assignacions.size(); ++i) {
                hL.assignacions.add((Assignacio) this.assignacions.get(i).clone());
            }
        }
        catch (CloneNotSupportedException e) {
            throw new RuntimeException(e);
        }
        return hL;
    }

    public boolean equals(HoraLectiva hL) {
        if (this.assignacions.size() != hL.mida()) return false;
        for (int i = 0; i < this.assignacions.size(); i++) {
            if(!this.assignacions.get(i).equals(hL.getAssignacio(i))) return false;
        }
        return true;
    }

//    // Comprova que la AssignaciÃ³ asg sigui valida: no tingui ni l'aula ni Assignatura:Grup assignades
//    public boolean esAssignacioValida(Assignacio asg) {
//        for (int i = 0; i < this.assignacions.size(); i++) {
//            if(this.assignacions.get(i).getGrupAssignat().equals(asg.getGrupAssignat()) || this.assignacions.get(i).getCodiAulaAssignada().equals(asg.getCodiAulaAssignada())) return true;
//        }
//        return false;
//    }

    public boolean existeixAssignacio(Assignacio asg) {
        for (int i = 0; i < this.assignacions.size(); i++) {
            if(this.assignacions.get(i).equals(asg)) return true;
        }
        return false;
    }

    public boolean afegirAssignacio(Assignacio asg) {
        return this.assignacions.add(asg);
    }

    public boolean afegirAssignacio(String codiAssig, int numGrup, String codiAula) {
        Assignacio asg = new Assignacio(codiAssig, numGrup, codiAula);
        return this.assignacions.add(asg);
    }

    public boolean elimnarAssignacio(Assignacio asg) {
        if(!existeixAssignacio(asg)) {
            System.out.println(">>> eliminarAssignacio(): L'assignacio " + asg.getAssignacioPrintFormat() + " no existeix.");
            return false;
        }
        else return this.assignacions.remove(asg);
    }

    public boolean elimnarAssignacio(String codiAssig, int numGrup, String codiAula) {
        for (int i = 0; i < this.assignacions.size(); i++) {
            if (this.assignacions.get(i).getCodiAssig().equals(codiAssig)) {
                if (this.assignacions.get(i).getNumGrup() == numGrup) {
                    if(this.assignacions.get(i).getCodiAula().equals(codiAula)) {
                        this.assignacions.remove(i);
                        return true;
                    }
                }
            }
        }
        Assignacio asg = new Assignacio(codiAssig, numGrup, codiAssig);
        System.out.println(">>> eliminarAssignacioAGA(): L'assignacio " + asg.getAssignacioPrintFormat() + " no existeix.");
        return false;
    }

    public boolean eliminarAssignacio(int i) {
        Assignacio ret = new Assignacio(this.assignacions.remove(i));
        if (ret ==  null) return false;
        return true;
    }

    public ArrayList<Assignacio> getAssignacions() {
        return this.assignacions;
    }

    public Assignacio getAssignacio(int i) {
        return this.assignacions.get(i);
    }

    public boolean esBuit() {
        return (this.assignacions.isEmpty());
    }

    public int mida() {
        return this.assignacions.size();
    }

    public void printHoraLectivaLong() {
        System.out.println("    HoraLectiva: [Long Format]");
        for (int i = 0; i < this.assignacions.size(); i++) {
            this.assignacions.get(i).printAssignacioLong();
        }
    }

    public void printHoraLectiva() {
        System.out.println("    HoraLectiva:");
        for (int i = 0; i < this.assignacions.size(); i++) {
            this.assignacions.get(i).printAssignacio();
        }
    }

    public void printHoraLectivaXS() {
        System.out.print("    HoraLectiva: ");
        for (int i = 0; i < this.assignacions.size(); i++) {
            this.assignacions.get(i).printAssignacioXS();
        }
        System.out.print("\n");
    }
}
